{"is_source_file": true, "format": "JavaScript", "description": "This file defines controller functions for user management in a Node.js application, including listing users, retrieving user profiles, updating profiles, and deleting users. It uses external models for User and Group, and exports functions primarily for handling HTTP requests with authorization checks.", "external_files": ["../models/User", "../models/Group"], "external_methods": ["User.find()", "User.findById()", "User.findByIdAndUpdate()", "User.findByIdAndDelete()"], "published": ["exports.list", "exports.profile", "exports.updateProfile", "exports.delete"], "classes": [], "methods": [{"name": "list", "description": "Handles GET requests to list all users, accessible only to admin or teacher roles."}, {"name": "profile", "description": "Handles GET requests to retrieve a specific user's profile by ID."}, {"name": "updateProfile", "description": "Handles PUT/PATCH requests to update the current user's profile."}, {"name": "delete", "description": "Handles DELETE requests to remove a user, restricted to admin role."}], "calls": ["User.find()", "User.findById()", "User.findByIdAndUpdate()", "User.findByIdAndDelete()"], "search-terms": ["user controller", "authentication", "user management", "Express.js", "Node.js"], "state": 2, "file_id": 21, "knowledge_revision": 47, "git_revision": "2c817063b30de1743c48b8cb8fa968726eb1f174", "ctags": [{"_type": "tag", "name": "Group", "path": "/home/kavia/workspace/code-generation/student-collaboration-hub-141072-38888/student_admin_backend/src/controllers/user.js", "pattern": "/^const Group = require('..\\/models\\/Group');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/student-collaboration-hub-141072-38888/student_admin_backend/src/controllers/user.js", "pattern": "/^const User = require('..\\/models\\/User');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updates", "path": "/home/kavia/workspace/code-generation/student-collaboration-hub-141072-38888/student_admin_backend/src/controllers/user.js", "pattern": "/^    const updates = req.body;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/student-collaboration-hub-141072-38888/student_admin_backend/src/controllers/user.js", "pattern": "/^    const user = await User.findById(id).select('-passwordHash');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/student-collaboration-hub-141072-38888/student_admin_backend/src/controllers/user.js", "pattern": "/^    const user = await User.findByIdAndUpdate(userId, { profile: updates.profile }, { new: true,/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/student-collaboration-hub-141072-38888/student_admin_backend/src/controllers/user.js", "pattern": "/^    const userId = req.params.id;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/student-collaboration-hub-141072-38888/student_admin_backend/src/controllers/user.js", "pattern": "/^    const userId = req.user.uid;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "users", "path": "/home/kavia/workspace/code-generation/student-collaboration-hub-141072-38888/student_admin_backend/src/controllers/user.js", "pattern": "/^    const users = await User.find().select('-passwordHash');$/", "language": "JavaScript", "kind": "constant"}], "hash": "e72af37373b3a1e0a346d1765f9f6dd8", "format-version": 4, "code-base-name": "student_admin_backend", "filename": "student_admin_backend/src/controllers/user.js", "revision_history": [{"47": "2c817063b30de1743c48b8cb8fa968726eb1f174"}]}